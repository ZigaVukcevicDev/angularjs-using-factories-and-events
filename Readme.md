#Updated module using events and factories with AngularJS